# Chapter 06. 메모리와 캐시 메모리

- [Chapter 06. 메모리와 캐시 메모리](#chapter-06-메모리와-캐시-메모리)
- [06-1. RAM의 특징과 종류](#06-1-ram의-특징과-종류)
  - [RAM의 특징](#ram의-특징)
  - [RAM의 종류](#ram의-종류)
    - [DRAM (Dynamic RAM)](#dram-dynamic-ram)
    - [SRAM (Static RAM)](#sram-static-ram)
    - [SDRAM (Synchronous Dynamic RAM)](#sdram-synchronous-dynamic-ram)
    - [DDRSDRAM (Double Data Rate SDRAM)](#ddrsdram-double-data-rate-sdram)
- [06-2. 메모리의 주소 공간](#06-2-메모리의-주소-공간)
  - [물리 주소와 논리 주소](#물리-주소와-논리-주소)
  - [메모리 보호 기법](#메모리-보호-기법)
- [06-3. 캐시 메모리](#06-3-캐시-메모리)
  - [저장 장치 계층 구조](#저장-장치-계층-구조)
  - [캐시 메모리](#캐시-메모리)
    - [캐시 메모리 특징](#캐시-메모리-특징)
    - [참조 지역성 원리](#참조-지역성-원리)
- [Q\&A](#qa)


# 06-1. RAM의 특징과 종류

## RAM의 특징

- 휘발성 저장 장치 : 전원을 끄면 **저장된 내용이 사라지는** 저장 장치
    - **RAM**
        - **실행할 대상** 저장
        - 실행하고픈 프로그램이 보조기억장치에 있다면 복사, 저장 후 실행
- 비휘발성 저장 장치 : 전원이 꺼져도 **저장된 내용이 유지**되는 저장 장치
    - **보조기억장- 하드 디스크, SSD, USB 등
        - CPU 접근 불가
        - **보관할 대상** 저장
- RAM의 용량이 충분히 크다면 보조기억장치에서 많은 데이터 가져와 미리 저장 후 많은 프로그램을 동시에 실행하는데 유리 → 보조기억장치에서 여러 번 안 가져 와도 됨
    - 용량이 필요 이상으로 커졌을 때 속도가 비례하여 증가하진 않음

## RAM의 종류

### DRAM (Dynamic RAM)

: 시간이 지나면 저장된 데이터 점차 사라지는 RAM

- 특징
    - 데이터 소멸 막기 위해 일정 주기로 재활성화 필요
    - 일반적으로 사용하는 메모리
- 장점
    - 소비 전력 비교적 낮음
    - 저렴
    - 집적도 높음
    - 대용량 설계 용이
    

### SRAM (Static RAM)

: 시간이 지나도 저장된 데이터가 사라지지 않는 RAM

- 특징
    - 데이터 재활성화 필요 없음
    - 속도 빠름
    - 대용량은 아니지만 속도가 빨라야 하는 저장 장치
- 단점
    - 집적도 낮음
    - 소비 전력 큼
    - 가격 비쌈
    
- **DRAM과 SRAM 차이**
    
    ![image.png](./Chapter%2006%20메모리와%20캐시%20메모리/image.png)
    

### SDRAM (Synchronous Dynamic RAM)

: 클럭과 동기화된 DRAM

- 클럭에 맞춰 동작하며 클럭마다 CPU와 주고받을 수 있음

### DDRSDRAM (Double Data Rate SDRAM)

: 대역폭이 두 배 넓은 SDRAM

- SDR RDRAM * 2
- 대역폭 : 데이터를 주고받는 길의 너비
    - 한 클럭당 두 번씩 CPU와 데이터 주고 받을 수 있음
    - SDRAM 보다 전송 속도 두 배 가량 빠름
    - `SDRSDRAM` (Single Data Rate SDRAM) :한 클럭당 하나씩 데이터 주고 받을 수 있는 SDRAM
- DDR2 SDRAM
    - DDR SDRAM 보다 대역폭 두 배 넓은 SDRAM
    - SDR RDRAM * 4
- 최근 가장 흔히 사용됨

# 06-2. 메모리의 주소 공간

![image.png](./Chapter%2006%20메모리와%20캐시%20메모리/image%201.png)

## 물리 주소와 논리 주소

**`물리 주소`** : 메모리 하드웨어가 사용하는 주소

**`논리 주소`** : CPU와 실행 중인 프로그램이 사용하는 주소

- CPU가 메모리와 상호 작용하려면 논리 주소와 물리 주소 간의 변환 필요
    - **메모리 관리 장치(MMU)**
        - CPU와 주소 버스 사이에 위치한 하드웨어
        - CPU가 발생 시킨 **논리 주소** + **베이스 레지스터 값** ⇒ **물리 주소로 변환**
            - 논리 주소 : 프로그램의 시작점으로부터 떨어진 거리
            - **`베이스 레지스터`** : 프로그램의 가장 작은 물리 주소(첫 물리 주소 저장)
        - EX) 베이스 레지스터 값(1500), 논리 주소(10) ⇒ 물리 주소 1510번지(1500 + 10)

## 메모리 보호 기법

- 논리 주소 범위를 벗어나는 명령어 실행을 방지하고, 실행 중인 프로그램이 다른 프로그램에 영향 받지 않도록 보호 필요 ⇒ **프로그램의 독립적인 실행 공간 확보, 다른 프로그램의 영역 침범 막기**
    
    ![image.png](./Chapter%2006%20메모리와%20캐시%20메모리/image%202.png)
    
    - **`한계 레지스터`** : 논리 주소의 최대 크기 저장
- 논리 주소 < 한계 레지스터
    - 한계 레지스터 보다 높은 주소 값 접근 = 프로그램 범위에 벗어난 메모리 공간 접근
    
    ![image.png](./Chapter%2006%20메모리와%20캐시%20메모리/image%203.png)
    
    - 접근 주소 검사 ⇒ 한계 레지스터 보다 높은 논리 주소면 인터럽트 발생시켜 실행 중단

# 06-3. 캐시 메모리

## 저장 장치 계층 구조

: 각기 다른 용량과 성능의 저장 장치들을 계층화하여 표현한 구조

![image.png](./Chapter%2006%20메모리와%20캐시%20메모리/image%204.png)

- 명제
    1. CPU와 가까운 저장 장치는 빠르고, 멀리 있는 저장 장치는 느리다.
    2. 속도가 빠른 저장 장치는 저장 용량이 작고, 가격이 비싸다.
- 기준 : 저장 장치가 CPU에 얼마나 가까운가

## 캐시 메모리

: CPU의 연산속도와 메모리 접근 속도의 차이를 줄이기 위한 저장 장치

### 캐시 메모리 특징

- CPU와 메모리 사이에 위치
- 레지스터보다 용량 크고, 메모리보다 빠른 SRAM 기반의 저장 장치
- 메모리에서 CPU가 사용할 일부 데이터를 미리 가지고 와 활용
- CPU에 가까운 순서대로 계층 구성
    - L1 (level 1) 캐시 - L2 캐시 - L3 캐시
        - 일반적으로 L1 캐시,  L2 캐시는 코어 내부, L3 코어 외부에 위치
        - 메모리 용량 : L1 캐시 < L2 캐시 < L3 캐시 (커짐)
        - 속도 : L3 캐시 < L2 캐시 < L1 캐시 (빠름)
        - 가격 : L3 캐시 < L2 캐시 < L1 캐시 (비)
    - 멀티 코어 프로세서
        - L1 캐시, L2 캐시 - 코어마다 고유한 캐시 메모리 할당
        - L3 캐시 : 여러 코어가 공유하는형태
        
        ![image.png](./Chapter%2006%20메모리와%20캐시%20메모리/image%205.png)
        
        - 분리형 캐시
            - L1 캐시를 L1I 캐시(명령어만 저장)와 L1D 캐시(데이터만 저장)로 분리
            - 접근 속도 빠르게 만들기 위해
            
            ![image.png](./Chapter%2006%20메모리와%20캐시%20메모리/image%206.png)
            

### 참조 지역성 원리

<aside>
‼️

용어 정리

- **`캐시 히트`** : 자주 사용될 것으로 예측한 데이터가 실제로 CPU에서 활용될 경우
- **`캐시 미스`** : 예측이 틀려 메모리에서 필요한 데이터를 직접 가져와야 하는 경우
- **`캐시 적중률`** : 캐시가 히트되는 비율
    - 캐시 히트 횟수 / (캐시 히트 횟수 + 캐시 미스 횟수)
    - 캐시 적중률 높으면 CPU의 메모리 접근 횟수 줄일 수 있음
</aside>

- 캐시 메모리는 메모리 보다 용량 작기 때문에 CPU가 사용할 법한 대상 예측하여 저장
- 참조 지역성 원리에 의해 메모리로부터 가져올 데이터 결정
    - 참조 지역성 원리 : CPU가 메모리에 접근할 때 주된 경향을 바탕으로 만들어진 원리
        1. 시간 지역성 : CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다.
        2. 공간 지역성 : CPU는 접근한 메모리 공간 근처를 접근하려는 경향이 있다.
        

# Q&A

1. **RAM의 개념과 특징에 대해 설명하시오.**
2. **베이스 레지스터 값이 800이고, 논리 주소가 20일 때, 물리 주소가 몇 번지인지 말하고, 한계 레지스터가 논리 주소 보다 작으면 어떻게 되는지 설명하시오.**
3. **캐시 메모리가 무엇인지 설명하고, 캐시 적중률을 높이기 위한 방법을 설명하시오.**

- 1번 답
    
    RAM은 휘발성 저장 장치로, 전원을 끄면 **저장된 내용이 사라지는** 저장 장치입니다. 실행하고픈 프로그램이 보조기억장치에 있다면 복사, 저장 후 실행하기 때문에  RAM의 용량이 충분히 크다면 보조기억장치의 프로그램을 동시에 실행하여 실행 시간을 단축시킬 수 있다는 특징이 있습니다.
    
- 2번 답
    
    물리 주소는 800 + 20으로  820번지가 됩니다. 한계 레지스터가 논리 주소 보다 작으면 인터럽트를 발생시켜 프로그램 실행을 중단시킵니다.
    
- 3번 답
    
    캐시 메모리는 CPU의 연산속도와 메모리 접근 속도의 차이를 줄이기 위한 저장 장치입니다. 캐시 적중률은 캐시가 히트 되는 비율인데, 참조 지역성 원리에 의해 메모리로부터 가져올 데이터를 결정함으로써 캐시 히트 횟수를 높여 적중률을 높일 수 있습니다.